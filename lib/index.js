// Generated by CoffeeScript 1.8.0
var curry, each, ensureObj, filter, map, reduce;

curry = require("curry");

ensureObj = function(obj) {
  if (Object(obj) !== obj) {
    throw new TypeError("Value " + obj + " is not an object.");
  }
};

map = function(cb, obj) {
  var i, item, key, result, _i, _len, _ref;
  ensureObj(obj);
  if (Array.isArray(obj)) {
    return (function() {
      var _i, _len, _results;
      _results = [];
      for (i = _i = 0, _len = obj.length; _i < _len; i = ++_i) {
        item = obj[i];
        _results.push(cb(item, i));
      }
      return _results;
    })();
  } else {
    result = {};
    _ref = Object.keys(obj);
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      key = _ref[_i];
      result[key] = cb(obj[key], key);
    }
    return result;
  }
};

each = function(cb, obj) {
  map(obj, cb);
  return void 0;
};

filter = function(cb, obj) {
  var i, item, key, result, value, _i, _len, _ref;
  ensureObj(obj);
  if (Array.isArray(obj)) {
    return (function() {
      var _i, _len, _results;
      _results = [];
      for (i = _i = 0, _len = obj.length; _i < _len; i = ++_i) {
        item = obj[i];
        if (cb(item, i)) {
          _results.push(item);
        }
      }
      return _results;
    })();
  } else {
    result = {};
    _ref = Object.keys(obj);
    for (value = _i = 0, _len = _ref.length; _i < _len; value = ++_i) {
      key = _ref[value];
      if (cb(key, value)) {
        result[key] = value;
      }
    }
    return result;
  }
};

reduce = function(cb, result, obj) {
  var arr, key, _i, _len;
  ensureObj(obj);
  arr = Array.isArray(obj) ? obj : Object.keys(obj);
  for (_i = 0, _len = arr.length; _i < _len; _i++) {
    key = arr[_i];
    result = cb(result, obj[key], key);
  }
  return result;
};

module.exports = {
  map: curry(map),
  each: curry(each),
  filter: curry(filter),
  reduce: curry(reduce)
};
